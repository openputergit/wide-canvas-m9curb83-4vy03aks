<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Algo Trading Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f5fa;
        }
        
        .card {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .btn-primary {
            background-color: #193549;
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 0.25rem;
            font-weight: 600;
            transition: all 0.2s;
        }
        
        .btn-primary:hover {
            background-color: #0f283a;
        }

        .chart-container {
            height: 120px;
            width: 100%;
        }

        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f0f5fa;
        }

        .login-card {
            width: 100%;
            max-width: 400px;
            padding: 2rem;
        }

        .checkbox-blue {
            accent-color: #193549;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        table th, table td {
            padding: 0.5rem;
            text-align: left;
        }
        
        .select-dropdown {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 1em;
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="login-page" class="login-container">
        <div class="login-card card">
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold mb-1">Algo Trading Platform</h2>
                <p class="text-gray-600">Login to access your account</p>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                    <input type="email" id="email" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter your email">
                </div>
                
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                    <input type="password" id="password" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter your password">
                </div>
                
                <div class="flex justify-between items-center">
                    <div class="flex items-center">
                        <input type="checkbox" id="remember" class="checkbox-blue mr-2">
                        <label for="remember" class="text-sm text-gray-600">Remember me</label>
                    </div>
                    <a href="#" class="text-sm text-blue-600 hover:underline">Forgot password?</a>
                </div>
                
                <button id="login-button" class="btn-primary w-full">Login with Broker</button>
                
                <div class="text-center">
                    <button id="demo-mode-button" class="text-blue-600 hover:underline">Demo Mode</button>
                </div>
                
                <div class="flex items-center justify-center mt-4">
                    <div class="flex-1 h-px bg-gray-300"></div>
                    <span class="px-4 text-sm text-gray-500">Or continue with</span>
                    <div class="flex-1 h-px bg-gray-300"></div>
                </div>
                
                <button id="gmail-login" class="w-full flex items-center justify-center border border-gray-300 rounded-md px-3 py-2 space-x-2 hover:bg-gray-50">
                    <svg width="20" height="20" viewBox="0 0 20 20">
                        <path d="M17.9168 10.0497C17.9168 9.4505 17.8668 8.86317 17.7709 8.29167H10.0001V11.2667H14.4584C14.2543 12.2833 13.6793 13.1505 12.842 13.7172V15.825H15.4918C16.9877 14.4333 17.9168 12.4167 17.9168 10.0497Z" fill="#4285F4" />
                        <path d="M10.0001 18.3333C12.2001 18.3333 14.0501 17.5833 15.4918 15.825L12.842 13.7167C12.1003 14.2167 11.1628 14.5083 10.0001 14.5083C7.89591 14.5083 6.10841 13.0833 5.51675 11.1667H2.77508V13.3417C4.20841 16.2833 6.90425 18.3333 10.0001 18.3333Z" fill="#34A853" />
                        <path d="M5.51675 11.1667C5.34175 10.6667 5.24175 10.1333 5.24175 9.58333C5.24175 9.03333 5.34175 8.5 5.51675 8V5.825H2.77508C2.20008 7 1.83341 8.33333 1.83341 9.58333C1.83341 10.8333 2.20008 12.1667 2.77508 13.3417L5.51675 11.1667Z" fill="#FBBC05" />
                        <path d="M10.0001 4.65833C11.2668 4.65833 12.3959 5.08333 13.2793 5.93333L15.6126 3.6C14.0459 2.13333 12.2001 1.25 10.0001 1.25C6.90425 1.25 4.20841 3.3 2.77508 6.24167L5.51675 8.41667C6.10841 6.5 7.89591 4.65833 10.0001 4.65833Z" fill="#EA4335" />
                    </svg>
                    <span>Login with Google</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Trading Dashboard -->
    <div id="trading-dashboard" class="container mx-auto px-4 py-6 hidden">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Login Section Card -->
            <div class="card p-6">
                <button id="login-with-broker" class="btn-primary w-full mb-4">Login with Broker</button>
                <button id="demo-mode" class="text-center w-full">Demo Mode</button>
            </div>

            <!-- Account Info Box -->
            <div class="card p-6">
                <h2 class="text-xl font-bold mb-4">Account Info Box</h2>
                <div class="bg-gray-100 p-4 rounded-md space-y-2">
                    <div class="flex justify-between">
                        <span>Balance</span>
                        <span id="account-balance">₹0.00</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Holdings</span>
                        <span id="account-holdings">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Margin</span>
                        <span id="account-margin">₹0.00</span>
                    </div>
                </div>
            </div>

            <!-- Live Market Ticker -->
            <div class="card p-6">
                <h2 class="text-xl font-bold mb-4">Live Market Ticker</h2>
                <div class="bg-gray-100 p-4 rounded-md grid grid-cols-2 gap-4">
                    <div>
                        <div class="text-sm text-gray-600">NIFTY</div>
                        <div class="text-xl font-bold" id="nifty-value">22,340</div>
                    </div>
                    <div>
                        <div class="text-sm text-gray-600">BANK NIFTY</div>
                        <div class="text-xl font-bold" id="banknifty-value">48,056</div>
                        <div class="text-sm text-green-600" id="banknifty-change">0463</div>
                    </div>
                </div>
            </div>

            <!-- Watchlist Section -->
            <div class="card p-6">
                <h2 class="text-xl font-bold mb-4">Watchlist Section</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead>
                            <tr class="bg-gray-100">
                                <th>Symbol</th>
                                <th>LTP</th>
                                <th>Chg</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>NIFTY</td>
                                <td>22,340</td>
                                <td class="text-green-600">+105</td>
                            </tr>
                            <tr>
                                <td>RELIANCE</td>
                                <td>2,828</td>
                                <td class="text-red-600">-17</td>
                            </tr>
                            <tr>
                                <td>INFY</td>
                                <td>1,463</td>
                                <td class="text-red-600">-3</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Strategy Selector -->
            <div class="card p-6">
                <h2 class="text-xl font-bold mb-4">Strategy Selector (Algo)</h2>
                <div class="space-y-4">
                    <div>
                        <select id="strategy-selector" class="w-full border border-gray-300 rounded-md px-3 py-2 select-dropdown">
                            <option value="" selected disabled>Select strategy</option>
                            <option value="momentum">Momentum Strategy</option>
                            <option value="mean-reversion">Mean Reversion</option>
                            <option value="breakout">Breakout Strategy</option>
                            <option value="option-selling">Option Selling</option>
                        </select>
                    </div>

                    <div>
                        <input type="text" id="entry-exit-qty" class="w-full border border-gray-300 rounded-md px-3 py-2" placeholder="Entry/Exit qty">
                    </div>

                    <div>
                        <input type="text" id="entry-exit-conditions" class="w-full border border-gray-300 rounded-md px-3 py-2" placeholder="Entry/Exit Conditions">
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-sm font-medium">Max Loss %</div>
                        <input type="text" id="max-loss" value="0.30" class="border border-gray-300 rounded-md px-3 py-2 text-right">
                    </div>

                    <button id="start-algo-button" class="btn-primary w-full">Start Algo</button>
                </div>
            </div>

            <!-- Top Gainers/Losers -->
            <div class="card p-6">
                <h2 class="text-xl font-bold mb-4">Top Gainers/Losers</h2>
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead>
                            <tr class="bg-gray-100">
                                <th>Strike</th>
                                <th>OI</th>
                                <th>Put OI</th>
                                <th>IV</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>22,200</td>
                                <td>35</td>
                                <td>400</td>
                                <td class="text-green-600">+2</td>
                            </tr>
                            <tr>
                                <td>22,160</td>
                                <td>40</td>
                                <td>250</td>
                                <td class="text-green-600">+3</td>
                            </tr>
                            <tr>
                                <td>22,200</td>
                                <td>40</td>
                                <td>310</td>
                                <td class="text-red-600">-8</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Settings/Controls -->
            <div class="card p-6">
                <h2 class="text-xl font-bold mb-4">Settings/Controls</h2>
                <div class="space-y-4">
                    <div class="cursor-pointer hover:text-blue-600">API Key setup</div>
                    <div class="cursor-pointer hover:text-blue-600">Notification toggle</div>
                    <div class="flex items-center">
                        <input type="checkbox" id="risk-controls" checked class="checkbox-blue mr-2">
                        <label for="risk-controls">Risk controls</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="circuit-breaker" checked class="checkbox-blue mr-2">
                        <label for="circuit-breaker">Circuit-breaker</label>
                    </div>
                </div>
            </div>

            <!-- PCR Analysis -->
            <div class="card p-6">
                <h2 class="text-xl font-bold mb-4">PCR Analysis</h2>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <div class="text-sm font-medium">Nifty PCR</div>
                    </div>
                    <div>
                        <div class="text-sm font-medium">Nifty PCR: <span class="font-normal">0.92 (Neutral)</span></div>
                    </div>
                </div>
            </div>

            <!-- Index Insights -->
            <div class="card p-6">
                <h2 class="text-xl font-bold mb-4">Index Insights</h2>
                <div class="chart-container mb-4">
                    <canvas id="indexChart"></canvas>
                </div>
                <div class="grid grid-cols-1 gap-2">
                    <div>R1fy PCR <span class="font-bold">1.08 (Bullish)</span></div>
                    <div>Bank Nifty PCR <span class="font-bold">0.92 (Neutral)</span></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Demo data
        const demoData = {
            balance: "₹125,000.00",
            holdings: "5",
            margin: "₹45,000.00"
        };
        
        // DOM Elements
        const loginPage = document.getElementById('login-page');
        const tradingDashboard = document.getElementById('trading-dashboard');
        const loginButton = document.getElementById('login-button');
        const demoModeButton = document.getElementById('demo-mode-button');
        const gmailLoginButton = document.getElementById('gmail-login');
        const loginWithBrokerButton = document.getElementById('login-with-broker');
        const demoMode = document.getElementById('demo-mode');
        const startAlgoButton = document.getElementById('start-algo-button');
        
        // Function to toggle between login and dashboard
        function showDashboard() {
            loginPage.classList.add('hidden');
            tradingDashboard.classList.remove('hidden');
            
            // Update account info with demo data
            document.getElementById('account-balance').textContent = demoData.balance;
            document.getElementById('account-holdings').textContent = demoData.holdings;
            document.getElementById('account-margin').textContent = demoData.margin;
            
            // Initialize charts after dashboard is visible
            initCharts();
        }
        
        // Login button event listeners
        loginButton.addEventListener('click', function() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            if (email && password) {
                showDashboard();
            } else {
                alert('Please enter both email and password');
            }
        });
        
        demoModeButton.addEventListener('click', function() {
            showDashboard();
        });
        
        gmailLoginButton.addEventListener('click', function() {
            showDashboard();
        });
        
        // Dashboard button event listeners
        loginWithBrokerButton.addEventListener('click', function() {
            loginPage.classList.remove('hidden');
            tradingDashboard.classList.add('hidden');
        });
        
        demoMode.addEventListener('click', function() {
            // Refresh demo data
            document.getElementById('account-balance').textContent = demoData.balance;
            document.getElementById('account-holdings').textContent = demoData.holdings;
            document.getElementById('account-margin').textContent = demoData.margin;
        });
        
        // Strategy selector functionality
        const strategySelector = document.getElementById('strategy-selector');
        strategySelector.addEventListener('change', function() {
            const selectedStrategy = this.value;
            console.log('Selected strategy:', selectedStrategy);
            
            // You can add logic here to update the UI based on the selected strategy
        });
        
        // Start Algo button event listener
        startAlgoButton.addEventListener('click', function() {
            const selectedStrategy = strategySelector.value;
            const entryExitQty = document.getElementById('entry-exit-qty').value;
            const entryExitConditions = document.getElementById('entry-exit-conditions').value;
            const maxLoss = document.getElementById('max-loss').value;
            
            if (!selectedStrategy) {
                alert('Please select a strategy');
                return;
            }
            
            if (!entryExitQty) {
                alert('Please enter Entry/Exit quantity');
                return;
            }
            
            console.log('Starting algo with:', {
                strategy: selectedStrategy,
                qty: entryExitQty,
                conditions: entryExitConditions,
                maxLoss: maxLoss
            });
            
            // Change button text to indicate algo is running
            this.textContent = 'Stop Algo';
            this.classList.add('bg-red-600');
            this.classList.remove('bg-blue-600');
            
            // Switch back after a demo period
            setTimeout(() => {
                this.textContent = 'Start Algo';
                this.classList.remove('bg-red-600');
                this.classList.add('bg-blue-600');
                alert('Demo algo run completed');
            }, 10000);
        });
        
        // Live market data simulation
        function updateMarketData() {
            const niftyValue = document.getElementById('nifty-value');
            const bankniftyValue = document.getElementById('banknifty-value');
            const bankniftyChange = document.getElementById('banknifty-change');
            
            // Simulate small random changes
            const currentNifty = parseFloat(niftyValue.textContent.replace(',', ''));
            const currentBankNifty = parseFloat(bankniftyValue.textContent.replace(',', ''));
            
            const niftyChange = (Math.random() * 20 - 10).toFixed(2);
            const bankNiftyChange = (Math.random() * 40 - 20).toFixed(2);
            
            const newNifty = currentNifty + parseFloat(niftyChange);
            const newBankNifty = currentBankNifty + parseFloat(bankNiftyChange);
            
            niftyValue.textContent = newNifty.toLocaleString('en-IN', {maximumFractionDigits: 0});
            bankniftyValue.textContent = newBankNifty.toLocaleString('en-IN', {maximumFractionDigits: 0});
            
            // Update change color
            if (niftyChange > 0) {
                niftyValue.classList.remove('text-red-600');
                niftyValue.classList.add('text-green-600');
            } else {
                niftyValue.classList.remove('text-green-600');
                niftyValue.classList.add('text-red-600');
            }
            
            if (bankNiftyChange > 0) {
                bankniftyValue.classList.remove('text-red-600');
                bankniftyValue.classList.add('text-green-600');
                bankniftyChange.classList.remove('text-red-600');
                bankniftyChange.classList.add('text-green-600');
            } else {
                bankniftyValue.classList.remove('text-green-600');
                bankniftyValue.classList.add('text-red-600');
                bankniftyChange.classList.remove('text-green-600');
                bankniftyChange.classList.add('text-red-600');
            }
            
            // Update change value
            bankniftyChange.textContent = Math.abs(bankNiftyChange).toFixed(0).padStart(4, '0');
        }
        
        // Initialize charts
        function initCharts() {
            const ctx = document.getElementById('indexChart').getContext('2d');
            
            // Generate demo chart data
            const labels = ['10:00', '11:00', '12:00', '13:00', '14:00', '15:00'];
            const data = [22.5, 23.1, 22.0, 22.8, 23.2, 23.8];
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Nifty Index',
                        data: data,
                        borderColor: '#1a73e8',
                        tension: 0.3,
                        borderWidth: 2,
                        pointRadius: 0,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            }
                        },
                        y: {
                            position: 'left',
                            grid: {
                                borderDash: [2, 2]
                            }
                        }
                    }
                }
            });
        }
        
        // Update market data every 5 seconds
        setInterval(updateMarketData, 5000);
        
        // Checkbox event listeners
        document.getElementById('risk-controls').addEventListener('change', function() {
            console.log('Risk controls:', this.checked ? 'enabled' : 'disabled');
        });
        
        document.getElementById('circuit-breaker').addEventListener('change', function() {
            console.log('Circuit breaker:', this.checked ? 'enabled' : 'disabled');
        });
    </script>
<script>document.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>
	</body>
</html>